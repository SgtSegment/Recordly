<!--Chuck-Tha-Goat-was-here-->

<link href='https://fonts.googleapis.com/css?family=Gluten' rel='stylesheet'>

<head>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<title>Recordly!</title>

<style>
#results {
  max-height: 400px;
  overflow-y: auto;
  padding: 10px;
  list-style: none;
}

.links {
  text-align: center;
}


.links a {
  color: white;
  text-decoration: none;
}

.links a:hover {
  text-decoration: underline;
}
.name-input {
  border-radius: 15px;
  text-align: center;
  display: block;
  margin: 20px auto;
  width: 300px;
  height: 50px;
  background-color: rgba(128, 128, 128, 0.8);
    font-family: 'Gluten';font-size: 20px;
}
.title {
  text-align: center;
  font-family: 'Gluten';font-size: 70px;
}
.qrcode {
  position: fixed;
 margin-top: -200px; /* less space above */
  margin-left: 50px; /* keep side margin if you want */
}
.qr-code-input {
  position: fixed;
  margin-top: 60px;
  margin-left: 50px;
    background-color: rgba(128, 128, 128, 0.8);
    font-family: 'Gluten';font-size: 20px;
  text-align: center;
  border-radius: 15px;
}
.name-input::placeholder,
.qr-code-input::placeholder {
  color: #ccc; /* light gray â€“ you can change this to anything */
}
body {
            background-image: url('br.png');
            background-size: cover;
            background-position: center;
            margin: 0;
            padding: 0 20px 40px 20px;
            font-family: 'Gluten', Arial, sans-serif;
        }
</style>

</head>

<body>

  <p class="title">Recorldy!</p>

  <input type="text" placeholder="label, artist, ect" class="name-input" oninput="search()" id="searchInput">
  <ul id="results" class="links"></ul>

  <div id="qrcode" class="qrcode"></div>
  <input type="text" placeholder="Record Link" class="qr-code-input" id="inputs" oninput="generateQRCode()" />

</body>

















<script>
//QR-Code-Generator
function generateQRCode() {
  //gets you link for html
  var userInput = document.getElementById('inputs').value;

  //removes and existing stinky qr codes
  document.getElementById('qrcode').innerHTML = "";

  //print/make-new-qr-code
  if (userInput) {
    var qrcode = new QRCode(document.getElementById("qrcode"), userInput);
  }
}

//Record-locator

//token
const token = 'LONsRzJDFSLAyHnlzYqYpOvoQQiMrkYTHnzEEuAD';

let timeoutId; //wait a bit till the user stops typing to send api request i guess

async function search() {
  clearTimeout(timeoutId);

  timeoutId = setTimeout(() => {
    const input = document.getElementById('searchInput').value.trim();
    const results = document.getElementById('results');

    if (!input) {
      results.innerHTML = '';
      return;
    }

    const url = `https://api.discogs.com/database/search?q=${encodeURIComponent(input)}&type=release&token=${token}&per_page=100`;

    fetch(url)
      .then(res => res.json())
      .then(data => {
        results.innerHTML = '';

        if (!data.results || data.results.length === 0) {
          results.innerHTML = 'No results found.';
          return;
        }

        data.results.forEach(item => {
          const li = document.createElement('li');
          li.innerHTML = `<a href="https://www.discogs.com/release/${item.id}" target="_blank" style="color:blue">
            ${item.title} (${item.year || 'Unknown year'})
          </a>`;
          results.appendChild(li);
        });
      })
      .catch(() => {
        results.innerHTML = 'Error loading results.';
      });
  }, 400);
}
</script>
